<Window x:Class="FajrApp.MenuWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Menu"
        WindowStyle="None"
        AllowsTransparency="True"
        Background="Transparent"
        ShowInTaskbar="False"
        Topmost="True"
        ResizeMode="NoResize"
        SizeToContent="WidthAndHeight"
        Deactivated="Window_Deactivated">
    
    <Window.Resources>
        <Style x:Key="MenuItemStyle" TargetType="Border">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Padding" Value="16,10"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#33FFFFFF"/>
                </Trigger>
            </Style.Triggers>
        </Style>
        
        <Style x:Key="MenuTextStyle" TargetType="TextBlock">
            <Setter Property="FontFamily" Value="Segoe UI Variable, Segoe UI"/>
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="Foreground" Value="White"/>
        </Style>
        
        <Style x:Key="MenuIconStyle" TargetType="TextBlock">
            <Setter Property="FontFamily" Value="Segoe MDL2 Assets"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="Foreground" Value="#AAFFFFFF"/>
            <Setter Property="Width" Value="24"/>
            <Setter Property="VerticalAlignment" Value="Center"/>
        </Style>
        
        <Style x:Key="SeparatorStyle" TargetType="Border">
            <Setter Property="Height" Value="1"/>
            <Setter Property="Background" Value="#33FFFFFF"/>
            <Setter Property="Margin" Value="12,4"/>
        </Style>
        
        <Style x:Key="CheckBoxStyle" TargetType="Border">
            <Setter Property="Width" Value="18"/>
            <Setter Property="Height" Value="18"/>
            <Setter Property="CornerRadius" Value="3"/>
            <Setter Property="BorderBrush" Value="#66FFFFFF"/>
            <Setter Property="BorderThickness" Value="1.5"/>
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Margin" Value="0,0,8,0"/>
        </Style>
        
        <!-- Fade in animation -->
        <Storyboard x:Key="FadeInAnimation">
            <DoubleAnimation Storyboard.TargetName="MenuBorder"
                           Storyboard.TargetProperty="Opacity"
                           From="0" To="1" Duration="0:0:0.15"/>
            <DoubleAnimation Storyboard.TargetName="MenuBorderScale"
                           Storyboard.TargetProperty="ScaleY"
                           From="0.95" To="1" Duration="0:0:0.15">
                <DoubleAnimation.EasingFunction>
                    <CubicEase EasingMode="EaseOut"/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>
        </Storyboard>
    </Window.Resources>
    
    <Border x:Name="MenuBorder"
            Background="#E8202020"
            CornerRadius="8"
            Margin="8"
            MinWidth="200"
            RenderTransformOrigin="0.5,1"
            Opacity="0">
        <Border.RenderTransform>
            <ScaleTransform x:Name="MenuBorderScale" ScaleX="1" ScaleY="1"/>
        </Border.RenderTransform>
        <Border.Effect>
            <DropShadowEffect Color="Black" BlurRadius="20" ShadowDepth="4" Opacity="0.5"/>
        </Border.Effect>
        
        <StackPanel Margin="0,6">
            <!-- Settings -->
            <Border x:Name="SettingsItem" Style="{StaticResource MenuItemStyle}" 
                    MouseLeftButtonUp="Settings_Click">
                <StackPanel Orientation="Horizontal">
                    <TextBlock Text="&#xE713;" Style="{StaticResource MenuIconStyle}"/>
                    <TextBlock x:Name="SettingsText" Text="Settings" Style="{StaticResource MenuTextStyle}"/>
                </StackPanel>
            </Border>
            
            <!-- Separator -->
            <Border Style="{StaticResource SeparatorStyle}"/>
            
            <!-- Change Position -->
            <Border x:Name="ChangePositionItem" Style="{StaticResource MenuItemStyle}" 
                    MouseLeftButtonUp="ChangePosition_Click">
                <StackPanel Orientation="Horizontal">
                    <TextBlock Text="&#xE8AB;" Style="{StaticResource MenuIconStyle}"/>
                    <TextBlock x:Name="ChangePositionText" Text="Change position" Style="{StaticResource MenuTextStyle}"/>
                </StackPanel>
            </Border>
            
            <!-- Auto Start -->
            <Border x:Name="AutoStartItem" Style="{StaticResource MenuItemStyle}" 
                    MouseLeftButtonUp="AutoStart_Click">
                <StackPanel Orientation="Horizontal">
                    <Border x:Name="AutoStartCheckBox" Style="{StaticResource CheckBoxStyle}">
                        <TextBlock x:Name="AutoStartCheck" 
                                   Text="&#xE73E;" 
                                   FontFamily="Segoe MDL2 Assets"
                                   FontSize="12"
                                   Foreground="#4CAF50"
                                   HorizontalAlignment="Center"
                                   VerticalAlignment="Center"
                                   Visibility="Collapsed"/>
                    </Border>
                    <TextBlock x:Name="AutoStartText" Text="Auto start" Style="{StaticResource MenuTextStyle}"/>
                </StackPanel>
            </Border>
            
            <!-- Separator -->
            <Border Style="{StaticResource SeparatorStyle}"/>
            
            <!-- About -->
            <Border x:Name="AboutItem" Style="{StaticResource MenuItemStyle}" 
                    MouseLeftButtonUp="About_Click">
                <StackPanel Orientation="Horizontal">
                    <TextBlock Text="&#xE946;" Style="{StaticResource MenuIconStyle}"/>
                    <TextBlock x:Name="AboutText" Text="About" Style="{StaticResource MenuTextStyle}"/>
                </StackPanel>
            </Border>
            
            <!-- Separator -->
            <Border Style="{StaticResource SeparatorStyle}"/>
            
            <!-- Exit -->
            <Border x:Name="ExitItem" Style="{StaticResource MenuItemStyle}" 
                    MouseLeftButtonUp="Exit_Click">
                <StackPanel Orientation="Horizontal">
                    <TextBlock Text="&#xE7E8;" Style="{StaticResource MenuIconStyle}"/>
                    <TextBlock x:Name="ExitText" Text="Exit" Style="{StaticResource MenuTextStyle}"/>
                </StackPanel>
            </Border>
        </StackPanel>
    </Border>
</Window>
